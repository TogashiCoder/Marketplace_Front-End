<div class="container">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
        <span>My Shopping Cart</span>
      </h2>
    </div>
    <div class="card-content">
      <table>
        <thead>
          <tr>
            <th class="image-column">Image</th>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Total</th>
            <th>Coupon</th>
            <th class="remove-column">Remove</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products" [@itemAnimation]>
            <td>
              <img [src]="product.image" [alt]="product.name" class="product-image">
            </td>
            <td class="product-name">{{product.name}}</td>
            <td>${{product.price.toFixed(2)}}</td>
            <td>
              <div class="quantity-control">
                <button class="icon-button" (click)="updateQuantity(product.id, product.quantity - 1)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </button>
                <input type="number" [value]="product.quantity" (change)="updateQuantity(product.id, $any($event.target).value)" class="quantity-input">
                <button class="icon-button" (click)="updateQuantity(product.id, product.quantity + 1)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </button>
              </div>
            </td>
            <td class="total-price">${{(product.price * product.quantity).toFixed(2)}}</td>
            <td>
              <div class="coupon-control">
                <input type="text" [value]="product.coupon" (input)="applyCoupon(product.id, $any($event.target).value)" placeholder="Enter coupon" class="coupon-input">
                <button class="apply-button">Apply</button>
              </div>
            </td>
            <td>
              <button class="icon-button remove-button" (click)="removeProduct(product.id)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="card-footer">
      <button class="update-cart-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
        Update Cart
      </button>
      <div class="cart-totals">
        <h2>Cart Totals</h2>
        <div class="total-row">
          <span>Subtotal</span>
          <span class="subtotal">${{subtotal.toFixed(2)}}</span>
        </div>
        <div class="total-row">
          <span>Total</span>
          <span class="total">${{subtotal.toFixed(2)}}</span>
        </div>
        <button class="checkout-button">Proceed to Checkout</button>
      </div>
    </div>
  </div>
</div>
